!function(a){function h(a,b,c,d){return d||(d=a),Object.keys(a).reduce(function(b,e,f){return c.call(d,b,a[e],e,a,f)},b)}function i(a){return Object.keys(a).forEach(function(b){delete a[b]},a),a}function j(b,c){switch(a.type(b)){case"array":return Array.isArray(c)?k(b,c):d;case"object":return a.isObj(c)?l(b,c):d;case"date":return+b==+c}return b==c}function k(a,c){return a[b]==c[b]&&Array.from(a).every(function(a,b){return j(c[b],a)})}function l(b,c){if(Object.len(b)!==Object.len(c)||n(b)!==n(c))return d;for(var e in c)if(a.has(b,e)!==a.has(c,e)||!j(b[e],c[e]))return d;return f}function m(a){return Object.getOwnPropertyNames(a)}function n(a){return m(a)[b]}function o(a,b,c){return Object.keys(a).reduce(function(c,d,e){return b.call(a,c,a[d],d,a,e)},c)}var b="length",c="prototype",d=!1,e=null,f=!0,g="r";a.defs(Object,{aggregate:h,clear:i,equalTo:j,ownKeys:m,ownLen:n,reduce:o},g),a.defs(Function[c],function(){var c=/^[\s\(]*function[^\(]*\(([^\)]*)\)/,d=/\s*,\s*/;return a.def(Function,"from",a.describe(function(c){return a.isFn(c)?c:function(){return c}},g)),{params:{get:function(){var a=String(this).match(c)[1].trim().split(d);return a[b]==1&&!a[0]?[]:a}},attempt:function(a){var b=Array.from(arguments,1),c=this;return function(){try{return c.apply(a||this,b)}catch(e){return e}}()},bake:function(){var b="baked",c=this;return c[b]||!a.def(c,b,a.describe(function(){return c.apply(this,[this].concat(Array.from(arguments)))}.mimic(c),g))||c[b]},defer:a.ENV=="commonjs"?function(a){return process.nextTick(this.bind.apply(this,[a].concat(Array.from(arguments,1))))}:function(){return this.delay.apply(this,[1].concat(Array.from(arguments)))},delay:function(b,c){function f(){return f.stop(),e.apply(c||this,d)}var d=Array.from(arguments,2),e=this;return a.copy(f,{stop:function(){return clearTimeout(this.timeoutId),delete this.timeoutId,e},timeoutId:setTimeout(f,b)})},memoize:function(b){function d(){var a=Array.from(arguments),d=a.toString();return d in b?b[d]:b[d]=c.apply(this,a)}var c=this;return a.isObj(b)||(b=a.obj()),d.unmemoize=function(){return c},d},stop:function(){return this},unmemoize:function(){return this},wrap:function(a){var b=Array.from(arguments,1),c=this;return function(){return a.apply(this,[c.bind(this)].concat(b).concat(Array.from(arguments)))}.mimic(a)}}}(),g),a.defs(Array[c],function(){function d(a,b){return a(b)?0:1}function h(a,b){return a.test(b)?0:1}function i(a,b){return Object.value(b,a)||1}function j(a){return a?a:e}function k(a){return a[0]}function l(b){return[b,a.isFn(this)?this(b):Object.value(b,this)]}var m=Array[c],n={desc:function(a,b){return a[1]==b[1]?0:a[1]<b[1]?1:-1},asc:function(a,b){return a[1]==b[1]?0:a[1]>b[1]?1:-1}};return n[String(f)]=n[1]=n.asc,n[String(!1)]=n[0]=n.desc,a.def(Array,"sortFns",a.describe({value:n},g)),{aggregate:function(a,b,c){return m.reduce.call(this,function(a,d,e,f){return b.call(c||d,a,d,e,f)},a)},associate:function(b,c,d){return c||(c=a.requite),d||(d=this),m.reduce.call(this,function(a,e,f){return a[b[f]]=c.call(d,e,f,this),a},a.obj())},clear:function(){return this[b]=0,this},clone:function(){return m.slice.call(this)},compact:function(b){return m.mapc.call(this,b===f?j:a.requite)},contains:function(a){return!!~m.indexOf.call(this,a)},each:function(a,b){return m.forEach.call(this,a,b||this),this},flatten:function(c){if(a.isNum(c)){if(!(c>0))return this;--c}return m.aggregate.call(this,[],function(a,d,e){return Array.isArray(d)?a.splice.apply(a,[a[b],0].concat(d.flatten(c))):a.push(d),a},this)},grep:function(b,c,d){var e=this;return c||(c=a.requite),d||(d=e),!a.isStr(b)||(b=new RegExp(b.escapeRE(),"g")),m.aggregate.call(e,[],function(a,f,g){return!b.test(f)||a.push(c.call(d,f,g,e)),a})},groupBy:function(b,c,e){c||(c=a.requite);var g=this,j,k,l=a.obj();switch(a.type(b)){case"function":k=d;break;case"regexp":k=h;break;case"number":case"string":k=i,j=m.pluck.call(g,b,f);break;default:a.trace().error(new TypeError("Array.prototype.groupBy can only match based on a Function, RegExp or String."),f)}return(j||[0,1]).forEach(function(a){l[a]=[]}),m.aggregate.call(g,l,function(a,d,e){return a[k(b,d)].push(c.call(this,d,e,g)),a},e||g)},include:function(a){return m.contains.call(this,a)?!1:!this.push(a)||f},invoke:function(a){var b=Array.from(arguments,1);return m.map.call(this,function(c,d){return c[a].apply(c,b)})},invokec:function(b){var c=Array.from(arguments,1);return m.mapc.call(this,function(d,f){return a.isFn(d[b])?d[b].apply(d,c):e})},item:function(a){return this[a<0?this[b]+a:a]},last:function(){return this[this[b]-1]},mapc:function(b,c){return c||(c=this),m.reduce.call(this,function(d,e,f,g){return!a.exists(e=b.call(c,e,f,g))||d.push(e),d},[])},pluck:function(a,b){return m[b===f?"mapc":"map"].call(this,function(b){return Object.value(b,a)})},remove:function(){var a=Array.from(arguments),b,c=[],d;while(d=a.shift())!~(b=m.indexOf.call(this,d))||c.push(m.splice.call(this,b,1)[0]);return c},sortBy:function(b,c){return m.map.call(this,l,b).sort(a.isFn(c)?c:n[String(c).lc()]||n.asc).map(k)},tuck:function(a,b){var c=Array.isArray(b);return m.each.call(this,function(d,e){d[a]=c?b[e]:b})},uniq:function(){return m.reduce.call(this,function(a,b){return a.contains(b)||a.push(b),a},[])},without:function(){var a=m.clone.call(this);return a.remove.apply(a,arguments),a},zip:function(){var a=Array.from(arguments);return a.unshift(this),m.map.call(this,function(b,c){return a.pluck(c)})}}}(),g),a.defs(Number,function(){var b=Math.abs,c=9007199254740992,d=Math.floor;return{isInteger:function(b){return a.isNum(b)&&isFinite(b)&&b>-c&&b<c&&d(b)===b},toInteger:function(a){return a=+a,isNaN(a)?0:a===0||!isFinite(a)?a:(a<0?-1:1)*b(d(a))}}}(),"cw"),a.defs(Number[c],{pad:function(a,c){var d=this.toString(c||10);return"0".times(a-d[b])+d},times:function(b,c){return a.range(0,this).forEach(b,c||a.global),this},toHex:function(){return this.pad(2,16)}},g),a.defs(String[c],function(){function n(a,b){return b+b.lc()}function o(a){a=a.trim();var b=a.charAt(0),c=a.charAt(1),d=b.lc()==b&&c!=" "&&c.uc()==c?2:1,e=a.substring(d).replace(i,n).split(m);return e[0]=a.substring(0,d)+e[0],e}var c=a.obj(),d=a.obj(),g=/([-\*\+\?\.\|\^\$\/\\\(\)[\]\{\}])/g,h="\\$1",i=/([A-Z])/g,j=/\$?\{([^\}]+)\}/g,k=/#?(\w{1,6})/,l=/(\d{1,3})/g,m=/[\sA-Z_-]+/g;return{blank:function(){return!!this.trim().empty()},capitalize:function(){return this.charAt(0).uc()+this.substring(1).lc()},cc:function(){return this.toCamelCase()},clean:function(a){return a||(a=" "),a=c[a]||(c[a]={re:new RegExp("("+a+"){1,}","g"),fill:a}),this.split(a.re).filter(function(b){return!b.blank()&&b!=a.fill}).join(a.fill)},contains:function(a){return!!~this.indexOf(a)},empty:function(){return String(this)===""},format:function(){return this.gsub.call(this,Array.from(arguments))},gsub:function(a,b){return this.replace(b||j,function(b,c){return a[c]||""})},hyphenate:function(){return o(this).join("-").lc()},includes:function(a){return this.lc().contains(String(a).lc())},parts:function(a){var c=Array.from(this.match(a));switch(c[b]){case 1:if(c[0]===e||c[0]===this)return[];default:return c[0]!==this||c.shift(),c}},qw:function(){return this.split(" ")},regexpEsc:function(){return this.replace(g,h)},sliceEvery:function(a){return a=parseInt(a,10),isNaN(a)||this[b]<a||a==0?[String(this)]:this.match(d[a]||(d[a]=new RegExp("(.{1,"+a+"})","g")))},times:function(a){return(new Array(Number.toInteger(a)+1)).join(this)},toCamelCase:function(){var a=o(this),b=[a.shift()];return a.reduce(function(a,b){return a.push(b.capitalize()),a},b).join("")},toHex:function(){function a(a){return parseInt(a,10).pad(2,16)}return function(){var c=this.match(l);return"#"+(c[b]==1?a(c[0]).times(3):c.map(a).join(""))}}(),toJSON:function(){return JSON.parse(this)},toRGB:function(a){var c=this.match(k)[1],d=c[b],e;switch(d){case 6:break;case 3:c=this.times(2);break;case 2:c=this.times(3);break;default:c=d>6?c.substring(0,6):d==4?c+"00":c+"0"}return e=c.sliceEvery(2).map(function(a){return parseInt(a,16)}),a===f?e:"rgb("+e.join(", ")+")"},truncate:function(c,d){return c||(c=50),a.isStr(d)||(d="..."),this[b]<c?String(this):this.substring(0,c).trimRight()+d},uc:function(){return this.toUpperCase()},underscore:function(){return o(this).join("_").lc()}}}(),g),a.ENV!="commonjs"||module.exports===a||(module.exports=a)}(typeof n8iv!="undefined"?n8iv:typeof require!="undefined"?require("./n8iv._"):N)