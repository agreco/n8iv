!function(a){function f(a,b,c,d){return d||(d=a),Object.keys(a).reduce(function(b,e,f){return c.call(d,b,a[e],e,a,f)},b)}function g(a){return Object.keys(a).forEach(function(b){delete a[b]},a),a}function h(c,d){switch(a.type(c)){case"array":return Array.isArray(d)?i(c,d):b;case"object":return a.isObj(d)?j(c,d):b;case"date":return+c==+d}return c==d}function i(a,b){return a.length==b.length&&Array.from(a).every(function(a,c){return h(b[c],a)})}function j(c,e){if(Object.len(c)!==Object.len(e)||l(c)!==l(e))return b;for(var f in e)if(a.has(c,f)!==a.has(e,f)||!h(c[f],e[f]))return b;return d}function k(a){return Object.getOwnPropertyNames(a)}function l(a){return k(a).length}function m(a,b,c){return Object.keys(a).reduce(function(c,d,e){return b.call(a,c,a[d],d,a,e)},c)}"use strict";var b=!1,c=null,d=!0,e;a.defs(Object,{aggregate:f,clear:g,equalTo:h,ownKeys:k,ownLen:l,reduce:m},"w"),a.defs(Function.prototype,function(){var b=/^[\s\(]*function[^\(]*\(([^\)]*)\)/,c=/\s*,\s*/;return a.def(Function,"from",a.describe(function(c){return a.isFn(c)?c:function(){return c}},"w")),{params:{get:function(){var a=String(this).match(b)[1].trim().split(c);return a.length==1&&!a[0]?[]:a}},attempt:function(a){var b=Array.from(arguments,1),c=this;return function(){try{return c.apply(a||this,b)}catch(e){return e}}()},bake:function(){var b="baked",c=this;return c[b]||!a.def(c,b,a.describe(function(){return c.apply(this,[this].concat(Array.from(arguments)))}.mimic(c),"w"))||c[b]},defer:a.ENV=="commonjs"?function(a){return process.nextTick(this.bind.apply(this,[a].concat(Array.from(arguments,1))))}:function(){return this.delay.apply(this,[1].concat(Array.from(arguments)))},delay:function(b,c){function f(){return f.stop(),e.apply(c||this,d)}var d=Array.from(arguments,2),e=this;return a.copy(f,{stop:function(){return clearTimeout(this.timeoutId),delete this.timeoutId,e},timeoutId:setTimeout(f,b)})},memoize:function(b){function d(){var a=Array.from(arguments),d=a.toString();return d in b?b[d]:b[d]=c.apply(this,a)}var c=this;return a.isObj(b)||(b=a.obj()),d.unmemoize=function(){return c},d},stop:function(){return this},unmemoize:function(){return this},wrap:function(a){var b=Array.from(arguments,1),c=this;return function(){return a.apply(this,[c.bind(this)].concat(b).concat(Array.from(arguments)))}.mimic(a)}}}(),"w"),a.defs(Array.prototype,function(){function b(a,b){return a(b)?0:1}function e(a,b){return a.test(b)?0:1}function f(a,b){return Object.value(b,a)||1}function g(a){return a?a:c}function h(a){return a[0]}function i(b){return[b,a.isFn(this)?this(b):Object.value(b,this)]}var j=Array.prototype,k={desc:function(a,b){return a[1]==b[1]?0:a[1]<b[1]?1:-1},asc:function(a,b){return a[1]==b[1]?0:a[1]>b[1]?1:-1}};return k[String(d)]=k[1]=k.asc,k[String(!1)]=k[0]=k.desc,a.def(Array,"sortFns",a.describe({value:k},"w")),{aggregate:function(a,b,c){return j.reduce.call(this,function(a,d,e,f){return b.call(c||d,a,d,e,f)},a)},associate:function(b,c,d){return c||(c=a.requite),d||(d=this),j.reduce.call(this,function(a,e,f){return a[b[f]]=c.call(d,e,f,this),a},a.obj())},clear:function(){return this.length=0,this},clone:function(){return j.slice.call(this)},compact:function(b){return j.mapc.call(this,b===d?g:a.requite)},contains:function(a){return!!~j.indexOf.call(this,a)},each:function(a,b){return j.forEach.call(this,a,b||this),this},flatten:function(b){if(a.isNum(b)){if(!(b>0))return this;--b}return j.aggregate.call(this,[],function(a,c,d){return Array.isArray(c)?a.splice.apply(a,[a.length,0].concat(c.flatten(b))):a.push(c),a},this)},grep:function(b,c,d){var e=this;return c||(c=a.requite),d||(d=e),!a.isStr(b)||(b=new RegExp(b.escapeRE(),"g")),j.aggregate.call(e,[],function(a,f,g){return!b.test(f)||a.push(c.call(d,f,g,e)),a})},groupBy:function(c,g,h){g||(g=a.requite);var i=this,k,l,m=a.obj();switch(a.type(c)){case"function":l=b;break;case"regexp":l=e;break;case"number":case"string":l=f,k=j.pluck.call(i,c,d);break;default:a.trace().error(new TypeError("Array.prototype.groupBy can only match based on a Function, RegExp or String."),d)}return(k||[0,1]).forEach(function(a){m[a]=[]}),j.aggregate.call(i,m,function(a,b,d){return a[l(c,b)].push(g.call(this,b,d,i)),a},h||i)},include:function(a){return j.contains.call(this,a)?!1:!this.push(a)||d},invoke:function(a){var b=Array.from(arguments,1);return j.map.call(this,function(c,d){return c[a].apply(c,b)})},invokec:function(b){var d=Array.from(arguments,1);return j.mapc.call(this,function(e,f){return a.isFn(e[b])?e[b].apply(e,d):c})},item:function(a){return this[a<0?this.length+a:a]},last:function(){return this[this.length-1]},mapc:function(b,c){return c||(c=this),j.reduce.call(this,function(d,e,f,g){return!a.exists(e=b.call(c,e,f,g))||d.push(e),d},[])},pluck:function(a,b){return j[b===d?"mapc":"map"].call(this,function(b){return Object.value(b,a)})},remove:function(){var a=Array.from(arguments),b,c=[],d;while(d=a.shift())!~(b=j.indexOf.call(this,d))||c.push(j.splice.call(this,b,1)[0]);return c},sortBy:function(b,c){return j.map.call(this,i,b).sort(a.isFn(c)?c:k[String(c).lc()]||k.asc).map(h)},tuck:function(a,b){var c=Array.isArray(b);return j.each.call(this,function(d,e){d[a]=c?b[e]:b})},uniq:function(){return j.reduce.call(this,function(a,b){return a.contains(b)||a.push(b),a},[])},without:function(){var a=j.clone.call(this);return a.remove.apply(a,arguments),a},zip:function(){var a=Array.from(arguments);return a.unshift(this),j.map.call(this,function(b,c){return a.pluck(c)})}}}(),"w"),a.defs(Number,function(){var b=Math.abs,c=9007199254740992,d=Math.floor;return{isInteger:function(b){return a.isNum(b)&&isFinite(b)&&b>-c&&b<c&&d(b)===b},toInteger:function(a){return a=+a,isNaN(a)?0:a===0||!isFinite(a)?a:(a<0?-1:1)*b(d(a))}}}(),"cw"),a.defs(Number.prototype,{pad:function(a,b){var c=this.toString(b||10);return"0".times(a-c.length)+c},times:function(b,c){return a.range(0,this).forEach(b,c||a.global),this},toHex:function(){return this.pad(2,16)}},"w"),a.defs(String.prototype,function(){function m(a,b){return b+b.lc()}function n(a){a=a.trim();var b=a.charAt(0),c=a.charAt(1),d=b.lc()==b&&c!=" "&&c.uc()==c?2:1,e=a.substring(d).replace(h,m).split(l);return e[0]=a.substring(0,d)+e[0],e}var b=a.obj(),e=a.obj(),f=/([-\*\+\?\.\|\^\$\/\\\(\)[\]\{\}])/g,g="\\$1",h=/([A-Z])/g,i=/\$?\{([^\}]+)\}/g,j=/#?(\w{1,6})/,k=/(\d{1,3})/g,l=/[\sA-Z_-]+/g;return{blank:function(){return!!this.trim().empty()},capitalize:function(){return this.charAt(0).uc()+this.substring(1).lc()},cc:function(){return this.toCamelCase()},clean:function(a){return a||(a=" "),a=b[a]||(b[a]={re:new RegExp("("+a+"){1,}","g"),fill:a}),this.split(a.re).filter(function(b){return!b.blank()&&b!=a.fill}).join(a.fill)},contains:function(a){return!!~this.indexOf(a)},empty:function(){return String(this)===""},format:function(){return this.gsub.call(this,Array.from(arguments))},gsub:function(a,b){return this.replace(b||i,function(b,c){return a[c]||""})},hyphenate:function(){return n(this).join("-").lc()},includes:function(a){return this.lc().contains(String(a).lc())},parts:function(a){var b=Array.from(this.match(a));switch(b.length){case 1:if(b[0]===c||b[0]===this)return[];default:return b[0]!==this||b.shift(),b}},qw:function(){return this.split(" ")},regexpEsc:function(){return this.replace(f,g)},sliceEvery:function(a){return a=parseInt(a,10),isNaN(a)||this.length<a||a==0?[String(this)]:this.match(e[a]||(e[a]=new RegExp("(.{1,"+a+"})","g")))},times:function(a){return(new Array(Number.toInteger(a)+1)).join(this)},toCamelCase:function(){var a=n(this),b=[a.shift()];return a.reduce(function(a,b){return a.push(b.capitalize()),a},b).join("")},toHex:function(){function a(a){return parseInt(a,10).pad(2,16)}return function(){var b=this.match(k);return"#"+(b.length==1?a(b[0]).times(3):b.map(a).join(""))}}(),toJSON:function(){return JSON.parse(this)},toRGB:function(a){var b=this.match(j)[1],c=b.length,e;switch(c){case 6:break;case 3:b=this.times(2);break;case 2:b=this.times(3);break;default:b=c>6?b.substring(0,6):c==4?b+"00":b+"0"}return e=b.sliceEvery(2).map(function(a){return parseInt(a,16)}),a===d?e:"rgb("+e.join(", ")+")"},truncate:function(b,c){return b||(b=50),a.isStr(c)||(c="..."),this.length<b?String(this):this.substring(0,b).trimRight()+c},uc:function(){return this.toUpperCase()},underscore:function(){return n(this).join("_").lc()}}}(),"w"),a.ENV!="commonjs"||module.exports===a||(module.exports=a)}(typeof n8iv!="undefined"?n8iv:typeof require!="undefined"?require("./n8iv._"):null)